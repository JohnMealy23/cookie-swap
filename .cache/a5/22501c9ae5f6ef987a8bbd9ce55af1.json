{"id":"../src/iframe/createIframeRoutes.ts","dependencies":[{"name":"/Users/jmealy/dev/cookie-swap/tsconfig.json","includedInParent":true,"mtime":1585284566000},{"name":"/Users/jmealy/dev/cookie-swap/package.json","includedInParent":true,"mtime":1585321873000},{"name":"./endpointFactory","loc":{"line":3,"column":32},"parent":"/Users/jmealy/dev/cookie-swap/src/iframe/createIframeRoutes.ts","resolved":"/Users/jmealy/dev/cookie-swap/src/iframe/endpointFactory.ts"},{"name":"../utils","loc":{"line":4,"column":22},"parent":"/Users/jmealy/dev/cookie-swap/src/iframe/createIframeRoutes.ts","resolved":"/Users/jmealy/dev/cookie-swap/src/utils.ts"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar endpointFactory_1 = require(\"./endpointFactory\");\n\nvar utils_1 = require(\"../utils\");\n/**\n * In this file, we create a map of which request receivers.\n * These receivers will sit inside of the iframe, waiting for calls\n * from the dependent sites.\n *\n * When the iframe receives a request, this map will allow it to route\n * it to the appropriate user-defined data getter for the cookie.\n */\n\n\nexports.createIframeRoutes = function (cookieConfigs) {\n  return cookieConfigs.reduce(function (routes, cookieConfig) {\n    var cookieName = cookieConfig.cookieName;\n    var endpointKey = utils_1.getRequestKey(cookieName);\n\n    if (routes[endpointKey]) {\n      throw new Error(\"Multiple modules are attempting to define the \" + cookieName + \" cookie.  Please ensure the getter for this is set once per implementation.\");\n    }\n\n    routes[endpointKey] = endpointFactory_1.iframeEndpointFactory(cookieConfig);\n    return routes;\n  }, {});\n};"},"sourceMaps":{"js":{"mappings":[{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":7,"column":0}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":7,"column":4}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":7,"column":21}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":7,"column":24}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":7,"column":31}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":7,"column":32}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":7,"column":51}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":7,"column":52}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":9,"column":0}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":9,"column":4}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":9,"column":11}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":9,"column":14}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":9,"column":21}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":9,"column":22}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":9,"column":32}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":9,"column":33}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":10,"column":0}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":15,"column":13},"generated":{"line":20,"column":0}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":15,"column":13},"generated":{"line":20,"column":7}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":15,"column":13},"generated":{"line":20,"column":8}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":15,"column":13},"generated":{"line":20,"column":26}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":15,"column":34},"generated":{"line":20,"column":29}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":16,"column":4},"generated":{"line":20,"column":39}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":15,"column":34},"generated":{"line":20,"column":52}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":16,"column":33},"generated":{"line":20,"column":54}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":17,"column":19},"generated":{"line":21,"column":0}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":17,"column":19},"generated":{"line":21,"column":9}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":17,"column":32},"generated":{"line":21,"column":22}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":18,"column":5},"generated":{"line":21,"column":23}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":17,"column":19},"generated":{"line":21,"column":29}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":18,"column":12},"generated":{"line":21,"column":30}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":18,"column":13},"generated":{"line":21,"column":40}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":18,"column":12},"generated":{"line":21,"column":46}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":18,"column":35},"generated":{"line":21,"column":48}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":18,"column":12},"generated":{"line":21,"column":60}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":18,"column":47},"generated":{"line":21,"column":62}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":19,"column":16},"generated":{"line":22,"column":0}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":19,"column":16},"generated":{"line":22,"column":8}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":19,"column":16},"generated":{"line":22,"column":18}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":19,"column":16},"generated":{"line":22,"column":21}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":19,"column":16},"generated":{"line":22,"column":33}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":19,"column":16},"generated":{"line":22,"column":34}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":19,"column":16},"generated":{"line":22,"column":44}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":20,"column":8},"generated":{"line":23,"column":0}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":20,"column":14},"generated":{"line":23,"column":8}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":20,"column":25},"generated":{"line":23,"column":19}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":20,"column":28},"generated":{"line":23,"column":22}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":20,"column":28},"generated":{"line":23,"column":29}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":20,"column":28},"generated":{"line":23,"column":30}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":20,"column":28},"generated":{"line":23,"column":43}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":20,"column":42},"generated":{"line":23,"column":44}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":20,"column":28},"generated":{"line":23,"column":54}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":20,"column":8},"generated":{"line":23,"column":55}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":21,"column":8},"generated":{"line":25,"column":0}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":21,"column":12},"generated":{"line":25,"column":8}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":21,"column":18},"generated":{"line":25,"column":14}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":21,"column":19},"generated":{"line":25,"column":15}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":21,"column":18},"generated":{"line":25,"column":26}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":21,"column":8},"generated":{"line":25,"column":27}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":21,"column":33},"generated":{"line":25,"column":29}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":22,"column":12},"generated":{"line":26,"column":0}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":22,"column":18},"generated":{"line":26,"column":12}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":22,"column":22},"generated":{"line":26,"column":16}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":22,"column":18},"generated":{"line":26,"column":21}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":22,"column":28},"generated":{"line":26,"column":22}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":22,"column":77},"generated":{"line":26,"column":73}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":22,"column":28},"generated":{"line":26,"column":83}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":22,"column":87},"generated":{"line":26,"column":86}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":22,"column":18},"generated":{"line":26,"column":163}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":22,"column":12},"generated":{"line":26,"column":164}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":23,"column":9},"generated":{"line":27,"column":0}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":24,"column":8},"generated":{"line":29,"column":0}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":24,"column":8},"generated":{"line":29,"column":4}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":24,"column":14},"generated":{"line":29,"column":10}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":24,"column":15},"generated":{"line":29,"column":11}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":24,"column":14},"generated":{"line":29,"column":22}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":24,"column":8},"generated":{"line":29,"column":23}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":24,"column":30},"generated":{"line":29,"column":26}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":24,"column":30},"generated":{"line":29,"column":43}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":24,"column":30},"generated":{"line":29,"column":44}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":24,"column":30},"generated":{"line":29,"column":65}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":24,"column":52},"generated":{"line":29,"column":66}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":24,"column":30},"generated":{"line":29,"column":78}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":24,"column":8},"generated":{"line":29,"column":79}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":25,"column":8},"generated":{"line":30,"column":0}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":25,"column":15},"generated":{"line":30,"column":11}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":25,"column":8},"generated":{"line":30,"column":17}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":26,"column":5},"generated":{"line":31,"column":0}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":17,"column":19},"generated":{"line":31,"column":3}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":26,"column":7},"generated":{"line":31,"column":5}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":17,"column":19},"generated":{"line":31,"column":7}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":17,"column":19},"generated":{"line":31,"column":8}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":26,"column":10},"generated":{"line":32,"column":0}},{"source":"../src/iframe/createIframeRoutes.ts","name":null,"original":{"line":15,"column":13},"generated":{"line":32,"column":1}}],"sources":{"../src/iframe/createIframeRoutes.ts":"import { IframeRoutes } from '../types';\nimport { iframeEndpointFactory } from './endpointFactory';\nimport { CookieConfig } from '../types';\nimport { getRequestKey } from '../utils';\n\n/**\n * In this file, we create a map of which request receivers.\n * These receivers will sit inside of the iframe, waiting for calls\n * from the dependent sites.\n *\n * When the iframe receives a request, this map will allow it to route\n * it to the appropriate user-defined data getter for the cookie.\n */\n\nexport const createIframeRoutes = (\n    cookieConfigs: CookieConfig[],\n): IframeRoutes => cookieConfigs\n    .reduce((routes: IframeRoutes, cookieConfig) => {\n        const { cookieName } = cookieConfig\n        const endpointKey = getRequestKey(cookieName)\n        if (routes[endpointKey]) {\n            throw new Error(`Multiple modules are attempting to define the ${cookieName} cookie.  Please ensure the getter for this is set once per implementation.`)\n        }\n        routes[endpointKey] = iframeEndpointFactory(cookieConfig)\n        return routes\n    }, {})\n"},"lineCount":null}},"error":null,"hash":"6b75a166ed024bec0d2f9091890d944b","cacheData":{"env":{}}}