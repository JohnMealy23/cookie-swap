{"id":"../src/appAdapter/index.ts","dependencies":[{"name":"/Users/jmealy/dev/cookie-swap/tsconfig.json","includedInParent":true,"mtime":1585284566000},{"name":"/Users/jmealy/dev/cookie-swap/package.json","includedInParent":true,"mtime":1585321873000},{"name":"../utils","loc":{"line":3,"column":22},"parent":"/Users/jmealy/dev/cookie-swap/src/appAdapter/index.ts","resolved":"/Users/jmealy/dev/cookie-swap/src/utils.ts"},{"name":"./getAppListener","loc":{"line":4,"column":31},"parent":"/Users/jmealy/dev/cookie-swap/src/appAdapter/index.ts","resolved":"/Users/jmealy/dev/cookie-swap/src/appAdapter/getAppListener.ts"},{"name":"./sendRequest","loc":{"line":5,"column":28},"parent":"/Users/jmealy/dev/cookie-swap/src/appAdapter/index.ts","resolved":"/Users/jmealy/dev/cookie-swap/src/appAdapter/sendRequest.ts"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar utils_1 = require(\"../utils\");\n\nvar getAppListener_1 = require(\"./getAppListener\");\n\nvar sendRequest_1 = require(\"./sendRequest\");\n/**\n * In this file we set up the listener for the application,\n * then send out the request for the cookie value to the iframe.\n *\n * The iframe will receive the request and check for a pre-existing\n * cookie value.  If that value does not exist, the iframe will\n * execute the user-defined data-getter, cookie-ing the response.\n *\n * Finally, the iframe will relay to recovered value back to the\n * application.\n */\n\n\nexports.gimmeThatCookieGoodness = function (_a) {\n  var cookieName = _a.cookieName,\n      iframeUrl = _a.iframeUrl,\n      data = _a.data,\n      resetCookie = _a.resetCookie;\n  return new Promise(function (resolve, reject) {\n    // Create and attach listener, to await iframe responses, and\n    // relay them back to the host app.\n    var listener = getAppListener_1.getAppListener(cookieName, iframeUrl, resolve, reject);\n    window.addEventListener('message', listener, false); // Create the request for data, and send it into the iframe:\n\n    var request = {\n      key: utils_1.getRequestKey(cookieName),\n      data: data,\n      resetCookie: resetCookie\n    };\n    sendRequest_1.sendRequest(iframeUrl, request);\n  });\n};"},"sourceMaps":{"js":{"mappings":[{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":7,"column":0}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":7,"column":4}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":7,"column":11}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":7,"column":14}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":7,"column":21}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":7,"column":22}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":7,"column":32}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":7,"column":33}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":9,"column":0}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":9,"column":4}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":9,"column":20}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":9,"column":23}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":9,"column":30}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":9,"column":31}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":9,"column":49}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":9,"column":50}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":11,"column":0}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":11,"column":4}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":11,"column":17}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":11,"column":20}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":11,"column":27}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":11,"column":28}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":11,"column":43}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":11,"column":44}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":12,"column":0}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":18,"column":13},"generated":{"line":25,"column":0}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":18,"column":13},"generated":{"line":25,"column":7}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":18,"column":13},"generated":{"line":25,"column":8}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":18,"column":13},"generated":{"line":25,"column":31}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":18,"column":39},"generated":{"line":25,"column":34}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":18,"column":46},"generated":{"line":25,"column":44}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":18,"column":39},"generated":{"line":25,"column":46}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":23,"column":12},"generated":{"line":25,"column":48}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":19,"column":4},"generated":{"line":26,"column":6}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":19,"column":4},"generated":{"line":26,"column":16}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":19,"column":4},"generated":{"line":26,"column":19}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":19,"column":4},"generated":{"line":26,"column":21}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":19,"column":4},"generated":{"line":26,"column":22}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":20,"column":4},"generated":{"line":27,"column":6}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":20,"column":4},"generated":{"line":27,"column":15}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":20,"column":4},"generated":{"line":27,"column":18}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":20,"column":4},"generated":{"line":27,"column":20}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":20,"column":4},"generated":{"line":27,"column":21}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":21,"column":4},"generated":{"line":28,"column":6}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":21,"column":4},"generated":{"line":28,"column":10}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":21,"column":4},"generated":{"line":28,"column":13}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":21,"column":4},"generated":{"line":28,"column":15}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":21,"column":4},"generated":{"line":28,"column":16}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":22,"column":4},"generated":{"line":29,"column":6}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":22,"column":4},"generated":{"line":29,"column":17}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":22,"column":4},"generated":{"line":29,"column":20}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":22,"column":4},"generated":{"line":29,"column":22}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":22,"column":4},"generated":{"line":29,"column":23}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":23,"column":32},"generated":{"line":30,"column":0}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":23,"column":32},"generated":{"line":30,"column":9}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":23,"column":36},"generated":{"line":30,"column":13}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":23,"column":32},"generated":{"line":30,"column":20}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":23,"column":44},"generated":{"line":30,"column":21}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":23,"column":45},"generated":{"line":30,"column":31}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":23,"column":44},"generated":{"line":30,"column":38}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":23,"column":54},"generated":{"line":30,"column":40}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":23,"column":44},"generated":{"line":30,"column":46}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":23,"column":60},"generated":{"line":30,"column":48}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":25,"column":4},"generated":{"line":31,"column":0}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":26,"column":4},"generated":{"line":32,"column":0}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":27,"column":4},"generated":{"line":33,"column":0}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":27,"column":10},"generated":{"line":33,"column":8}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":27,"column":18},"generated":{"line":33,"column":16}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":27,"column":21},"generated":{"line":33,"column":19}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":27,"column":21},"generated":{"line":33,"column":35}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":27,"column":21},"generated":{"line":33,"column":36}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":27,"column":21},"generated":{"line":33,"column":50}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":27,"column":42},"generated":{"line":33,"column":51}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":27,"column":21},"generated":{"line":33,"column":61}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":27,"column":54},"generated":{"line":33,"column":63}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":27,"column":21},"generated":{"line":33,"column":72}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":27,"column":65},"generated":{"line":33,"column":74}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":27,"column":21},"generated":{"line":33,"column":81}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":27,"column":74},"generated":{"line":33,"column":83}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":27,"column":21},"generated":{"line":33,"column":89}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":27,"column":4},"generated":{"line":33,"column":90}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":28,"column":4},"generated":{"line":34,"column":0}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":28,"column":4},"generated":{"line":34,"column":4}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":28,"column":10},"generated":{"line":34,"column":10}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":28,"column":11},"generated":{"line":34,"column":11}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":28,"column":4},"generated":{"line":34,"column":27}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":28,"column":28},"generated":{"line":34,"column":28}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":28,"column":4},"generated":{"line":34,"column":37}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":28,"column":39},"generated":{"line":34,"column":39}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":28,"column":4},"generated":{"line":34,"column":47}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":28,"column":49},"generated":{"line":34,"column":49}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":28,"column":4},"generated":{"line":34,"column":54}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":23,"column":60},"generated":{"line":34,"column":56}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":30,"column":4},"generated":{"line":34,"column":57}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":31,"column":4},"generated":{"line":36,"column":0}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":31,"column":10},"generated":{"line":36,"column":8}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":31,"column":17},"generated":{"line":36,"column":15}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":31,"column":20},"generated":{"line":36,"column":18}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":32,"column":8},"generated":{"line":37,"column":0}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":32,"column":8},"generated":{"line":37,"column":6}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":32,"column":11},"generated":{"line":37,"column":9}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":32,"column":13},"generated":{"line":37,"column":11}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":32,"column":13},"generated":{"line":37,"column":18}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":32,"column":13},"generated":{"line":37,"column":19}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":32,"column":13},"generated":{"line":37,"column":32}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":32,"column":27},"generated":{"line":37,"column":33}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":32,"column":13},"generated":{"line":37,"column":43}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":31,"column":20},"generated":{"line":37,"column":44}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":33,"column":8},"generated":{"line":38,"column":0}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":33,"column":8},"generated":{"line":38,"column":6}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":33,"column":12},"generated":{"line":38,"column":10}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":33,"column":12},"generated":{"line":38,"column":12}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":31,"column":20},"generated":{"line":38,"column":16}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":34,"column":8},"generated":{"line":39,"column":0}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":34,"column":8},"generated":{"line":39,"column":6}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":34,"column":19},"generated":{"line":39,"column":17}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":34,"column":19},"generated":{"line":39,"column":19}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":31,"column":20},"generated":{"line":40,"column":0}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":31,"column":4},"generated":{"line":40,"column":5}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":36,"column":4},"generated":{"line":41,"column":0}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":36,"column":4},"generated":{"line":41,"column":4}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":36,"column":4},"generated":{"line":41,"column":17}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":36,"column":4},"generated":{"line":41,"column":18}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":36,"column":4},"generated":{"line":41,"column":29}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":36,"column":16},"generated":{"line":41,"column":30}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":36,"column":4},"generated":{"line":41,"column":39}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":36,"column":27},"generated":{"line":41,"column":41}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":36,"column":4},"generated":{"line":41,"column":48}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":37,"column":1},"generated":{"line":42,"column":0}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":23,"column":32},"generated":{"line":42,"column":3}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":23,"column":32},"generated":{"line":42,"column":4}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":37,"column":2},"generated":{"line":43,"column":0}},{"source":"../src/appAdapter/index.ts","name":null,"original":{"line":18,"column":13},"generated":{"line":43,"column":1}}],"sources":{"../src/appAdapter/index.ts":"import { getRequestKey } from \"../utils\";\nimport { getAppListener } from \"./getAppListener\";\nimport { sendRequest } from \"./sendRequest\";\nimport { AppConfig } from \"../types\";\n\n/**\n * In this file we set up the listener for the application,\n * then send out the request for the cookie value to the iframe.\n *\n * The iframe will receive the request and check for a pre-existing\n * cookie value.  If that value does not exist, the iframe will\n * execute the user-defined data-getter, cookie-ing the response.\n *\n * Finally, the iframe will relay to recovered value back to the\n * application.\n */\n\nexport const gimmeThatCookieGoodness = <Data>({\n    cookieName,\n    iframeUrl,\n    data,\n    resetCookie\n}: AppConfig): Promise<Data> => new Promise((resolve, reject) => {\n\n    // Create and attach listener, to await iframe responses, and\n    // relay them back to the host app.\n    const listener = getAppListener<Data>(cookieName, iframeUrl, resolve, reject)\n    window.addEventListener('message', listener, false);\n\n    // Create the request for data, and send it into the iframe:\n    const request = {\n        key: getRequestKey(cookieName),\n        data,\n        resetCookie\n    };\n    sendRequest(iframeUrl, request)\n});\n"},"lineCount":null}},"error":null,"hash":"f6212a34bd264043d439c0a4741f3fca","cacheData":{"env":{}}}